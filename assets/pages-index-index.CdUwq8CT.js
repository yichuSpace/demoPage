import{d as e,r as a,a as s,c as l,w as c,o as t,b as o,e as n,f as u,g as i,t as d,h as m,n as v,i as r,j as _,F as p,k,s as f,l as y,m as C,S as g}from"./index-C2kY_F60.js";const b=(e,a)=>{const s=e.__vccOpts||e;for(const[l,c]of a)s[l]=c;return s},O=b(e({__name:"RegionPicker",props:{modelValue:{}},emits:["update:modelValue","onChange"],setup(e,{emit:b}){const O=e,h=b,j=a(!1),R=a(0),U=a([]),V=a([]),$=a([]),w=s({code:"",name:""}),I=s({code:"",name:""}),x=s({code:"",name:""}),P=l((()=>w.name?I.name?x.name?`${w.name} ${I.name} ${x.name}`:`${w.name} ${I.name}`:w.name:"请选择地区"));c((()=>O.modelValue),(e=>{e!==P.value&&console.log(e)}),{immediate:!0});const A=()=>{j.value=!0},L=()=>{j.value=!1},Y=e=>{R.value=e},F=e=>{const a=U.value[e];Object.assign(w,a),Object.assign(I,{code:"",name:""}),Object.assign(x,{code:"",name:""}),V.value=[],$.value=[],(async e=>{try{const a=await k({url:`YOUR_API_URL/cities?provinceCode=${e}`});V.value=a.data}catch(a){f({title:"获取城市数据失败",icon:"none"})}})(a.code),R.value=1},S=e=>{const a=V.value[e];Object.assign(I,a),Object.assign(x,{code:"",name:""}),$.value=[],(async e=>{try{const a=await k({url:`YOUR_API_URL/areas?cityCode=${e}`});$.value=a.data}catch(a){f({title:"获取区县数据失败",icon:"none"})}})(a.code),R.value=2};return(async()=>{try{const e=await k({url:"YOUR_API_URL/provinces"});U.value=e.data}catch(e){f({title:"获取省份数据失败",icon:"none"})}})(),(e,a)=>{const s=y,l=C,c=g;return t(),o(l,{class:"region-picker"},{default:n((()=>[u(l,{class:"trigger",onClick:A},{default:n((()=>[u(s,{class:"selected-text"},{default:n((()=>[i(d(P.value),1)])),_:1}),u(s,{class:"arrow"},{default:n((()=>[i(">")])),_:1})])),_:1}),j.value?(t(),o(l,{key:0,class:"popup-mask",onClick:L})):m("",!0),u(l,{class:v(["popup-content",{"popup-show":j.value}])},{default:n((()=>[u(l,{class:"popup-header"},{default:n((()=>[u(l,{class:"header-tabs"},{default:n((()=>[u(l,{class:v(["tab-item",{active:0===R.value}]),onClick:a[0]||(a[0]=e=>Y(0))},{default:n((()=>[i(d(w.name||"请选择省份"),1)])),_:1},8,["class"]),w.code?(t(),o(l,{key:0,class:v(["tab-item",{active:1===R.value}]),onClick:a[1]||(a[1]=e=>Y(1))},{default:n((()=>[i(d(I.name||"请选择城市"),1)])),_:1},8,["class"])):m("",!0),I.code?(t(),o(l,{key:1,class:v(["tab-item",{active:2===R.value}]),onClick:a[2]||(a[2]=e=>Y(2))},{default:n((()=>[i(d(x.name||"请选择区县"),1)])),_:1},8,["class"])):m("",!0)])),_:1}),u(s,{class:"close-btn",onClick:L},{default:n((()=>[i("关闭")])),_:1})])),_:1}),u(c,{class:"option-list","scroll-y":""},{default:n((()=>[0===R.value?(t(!0),r(p,{key:0},_(U.value,((e,a)=>(t(),o(l,{key:e.code,class:v(["option-item",{active:w.code===e.code}]),onClick:e=>F(a)},{default:n((()=>[i(d(e.name),1)])),_:2},1032,["class","onClick"])))),128)):m("",!0),1===R.value?(t(!0),r(p,{key:1},_(V.value,((e,a)=>(t(),o(l,{key:e.code,class:v(["option-item",{active:I.code===e.code}]),onClick:e=>S(a)},{default:n((()=>[i(d(e.name),1)])),_:2},1032,["class","onClick"])))),128)):m("",!0),2===R.value?(t(!0),r(p,{key:2},_($.value,((e,a)=>(t(),o(l,{key:e.code,class:v(["option-item",{active:x.code===e.code}]),onClick:e=>(e=>{const a=$.value[e];Object.assign(x,a),h("update:modelValue",P.value),h("onChange",w,I,x),L()})(a)},{default:n((()=>[i(d(e.name),1)])),_:2},1032,["class","onClick"])))),128)):m("",!0)])),_:1})])),_:1},8,["class"])])),_:1})}}}),[["__scopeId","data-v-6eb95f47"]]),h=b(e({__name:"index",setup(e){const s=a("请选择地区222"),l=(e,a,s)=>{console.log("完整的选择数据：",{province:e,city:a,area:s})};return(e,a)=>{const c=C;return t(),o(c,{class:"content"},{default:n((()=>[u(O,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),onOnChange:l},null,8,["modelValue"]),u(c,{class:"selected-info"},{default:n((()=>[i(" 已选择："+d(s.value),1)])),_:1})])),_:1})}}}),[["__scopeId","data-v-e185a433"]]);export{h as default};
